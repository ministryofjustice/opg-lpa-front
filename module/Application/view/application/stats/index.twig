{% extends 'layout/twig/layout.twig' %}

{% block pageTitle %}
    LPA Statistics
{% endblock %}

{% block content %}

{% set v1 = {
        'current' : {
            'started'   : {'all':0, 'hw':0, 'pf':0},
            'created'   : {'all':0, 'hw':0, 'pf':0},
            'signed'    : {'all':0, 'hw':0, 'pf':0},
            'completed' : {'all':0, 'hw':0, 'pf':0},
            'deleted'   : {'all':0, 'hw':0, 'pf':0},
            'total'     : {'all':0, 'hw':0, 'pf':0}
        }
    }
%}

<h2 class="heading-medium">Users</h2>

<div class="mobile-scroll">
    <table>
        <thead>
            <tr>
                <th class="numeric">Total no. of registered users</th>
                <th class="numeric">Total no. of activated users</th>
                <th class="numeric">No. of activated users this month</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="numeric">{{ users.total }}</td>
                <td class="numeric">{{ users.activated }}</td>
                <td class="numeric">{{ users.activated-this-month }}</td>
            </tr>
        </tbody>
    </table>
</div>

<h2 class="heading-medium">Status by type</h2>

<div class="mobile-scroll">
    <table>
        <thead>
            <tr>
                <th>Status</th>
                <th class="numeric">All applications</th>
                <th class="numeric">Health and Welfare</th>
                <th class="numeric">Property and Financial Affairs</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Started</td>
                <td class="numeric">{{ lpas.all.started + v1.current.started.all }}</td>
                <td class="numeric">{{ lpas.health-and-welfare.started + v1.current.started.hw }}</td>
                <td class="numeric">{{ lpas.property-and-finance.started + v1.current.started.pf }}</td>
            </tr>
            <tr>
                <td>Created</td>
                <td class="numeric">{{ lpas.all.created + v1.current.created.all }}</td>
                <td class="numeric">{{ lpas.health-and-welfare.created + v1.current.created.hw }}</td>
                <td class="numeric">{{ lpas.property-and-finance.created + v1.current.created.pf }}</td>
            </tr>
            <tr>
                <td>Completed</td>
                <td class="numeric">{{ lpas.all.completed + v1.current.completed.all }}</td>
                <td class="numeric">{{ lpas.health-and-welfare.completed + v1.current.completed.hw }}</td>
                <td class="numeric">{{ lpas.property-and-finance.completed + v1.current.completed.pf }}</td>
            </tr>
            <tr>
                <td><strong>Total</strong></td>
                <td class="numeric">{{ lpas.all.started + lpas.all.created + lpas.all.completed + v1.current.total.all }}</td>
                <td class="numeric">{{ lpas.health-and-welfare.started + lpas.health-and-welfare.created + lpas.health-and-welfare.completed + v1.current.total.hw }}</td>
                <td class="numeric">{{ lpas.property-and-finance.started + lpas.property-and-finance.created + lpas.property-and-finance.completed + v1.current.total.pf }}</td>
            </tr>
            <tr>
                <td>Deleted</td>
                <td class="numeric">{{ lpas.all.deleted + v1.current.deleted.all }}</td>
                <td class="numeric">&nbsp;</td>
                <td class="numeric">&nbsp;</td>
            </tr>
        </tbody>
    </table>
</div>

<h2 class="heading-medium">Status by date</h2>

<div class="mobile-scroll">
    <table>
        <thead>
            <tr>
                <th>Status</th>
                {% for month,values in lpas['by-month'] %}
                    <th class="numeric">{{ month }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Started LPAs</td>
                {% for month,values in lpas['by-month'] %}
                    <td class="numeric">{{ values.started }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Created LPAs</td>
                {% for month,values in lpas['by-month'] %}
                    <td class="numeric">{{ values.created }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Completed LPAs</td>
                {% for month,values in lpas['by-month'] %}
                    <td class="numeric">{{ values.completed }}</td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
</div>

<h2 class="heading-medium">Type of users</h2>

<div class="mobile-scroll">
    <table>
        <thead>
            <tr>
                <th>Type of user</th>
                <th class="numeric">All time</th>
                {% for month,values in who['by-month'] %}
                    <th class="numeric">{{ month }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Donor</td>
                <td class="numeric">{{ who.all.donor.count }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.donor.count }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Friend or family</td>
                <td class="numeric">{{ who.all.friendOrFamily.count }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.friendOrFamily.count }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Professional</td>
                <td class="numeric">{{ who.all.professional.count }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.professional.count }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Digital Partner</td>
                <td class="numeric">{{ who.all.digitalPartner.count }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.digitalPartner.count }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Another organisation</td>
                <td class="numeric">{{ who.all.organisation.count }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.organisation.count }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Not said</td>
                <td class="numeric">{{ who.all.notSaid.count }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.notSaid.count }}</td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
</div>

<h2 class="heading-medium">Professionals</h2>

<div class="mobile-scroll">
    <table>
        <thead>
            <tr>
                <th>Type of user</th>
                <th class="numeric">All time</th>
                {% for month,values in who['by-month'] %}
                    <th class="numeric">{{ month }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Solicitor</td>
                <td class="numeric">{{ who.all.professional.subquestions.solicitor }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.professional.subquestions.solicitor }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Will-writer</td>
                <td class="numeric">{{ who.all.professional.subquestions.will-writer }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.professional.subquestions.will-writer }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Other</td>
                <td class="numeric">{{ who.all.professional.subquestions.other }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.professional.subquestions.other }}</td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
</div>

<h2 class="heading-medium">Digital Partners</h2>

<div class="mobile-scroll">
    <table>
        <thead>
            <tr>
                <th>Type of user</th>
                <th class="numeric">All time</th>
                {% for month,values in who['by-month'] %}
                    <th class="numeric">{{ month }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Age UK</td>
                <td class="numeric">{{ who.all.digitalPartner.subquestions.Age-Uk }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.digitalPartner.subquestions.Age-Uk }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Alzheimer's Society</td>
                <td class="numeric">{{ who.all.digitalPartner.subquestions.Alzheimer-Society }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.digitalPartner.subquestions.Alzheimer-Society }}</td>
                {% endfor %}
            </tr>
            <tr>
                <td>Citizens Advice Bureau</td>
                <td class="numeric">{{ who.all.digitalPartner.subquestions.Citizens-Advice-Bureau }}</td>
                {% for month,values in who['by-month'] %}
                    <td class="numeric">{{ values.digitalPartner.subquestions.Citizens-Advice-Bureau }}</td>
                {% endfor %}
            </tr>
        </tbody>
    </table>
</div>

{% endblock content %}
